(function(){function a(a){this.path=a;var b=this.path.split("."),c=b.slice(0,b.length-1).join("."),d=b[b.length-1];this.at_2x_path=c+"@2x."+d}function b(b){this.el=b,this.path=new a(this.el.getAttribute("src"));var c=this;this.path.check_2x_variant(function(a){a&&c.swap()})}var c=typeof exports=="undefined"?window:exports;c.RetinaImagePath=a,a.confirmed_paths=[],a.prototype.is_external=function(){return!!this.path.match(/^https?\:/i)&&!this.path.match("//"+document.domain)},a.prototype.check_2x_variant=function(b){var c,d=this;if(this.is_external())return b(!1);if(this.at_2x_path in a.confirmed_paths)return b(!0);c=new XMLHttpRequest,c.open("HEAD",this.at_2x_path),c.onreadystatechange=function(){return c.readyState!=4?b(!1):c.status>=200&&c.status<=399?(a.confirmed_paths.push(d.at_2x_path),b(!0)):b(!1)},c.send()},c.RetinaImage=b,b.prototype.swap=function(a){function b(){c.el.complete?(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight),c.el.setAttribute("src",a)):setTimeout(b,5)}typeof a=="undefined"&&(a=this.path.at_2x_path);var c=this;b()},c.devicePixelRatio>1&&(window.onload=function(){var a=document.getElementsByTagName("img"),c=[],d,e;for(d=0;d<a.length;d++)e=a[d],c.push(new b(e))})})()